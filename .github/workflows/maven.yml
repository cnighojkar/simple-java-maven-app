# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI with Maven , reusable GHA workflow

on:
  workflow_dispatch:
    inputs:
      java-version:
        description: java version to be used
        required: true
      falcon-client-id:
        description: falcon-client-id
        required: true
      falcon-client-secret:
        description: falcon-client-secret
        type: string
        required: true
  push:
    branches: [ "master" ]
permissions:
  contents: read
jobs:
  build-and-test:
    permissions:
      id-token: write
      contents: read
    uses: cnighojkar/myworkflows/.github/workflows/java-maven-build-test.yml@main
    with:
      java-version: '11'
      falcon-client-id: ${{ secrets.FALCON_IVAN_CLIENT_ID }}
      falcon-client-secret: ${{ secrets.FALCON_IVAN_CLIENT_SECRET }}
  
    secrets: inherit
